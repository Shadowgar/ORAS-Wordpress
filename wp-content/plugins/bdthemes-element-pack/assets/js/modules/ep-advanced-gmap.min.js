!function(e,t){"use strict";var o=function(e,t){var o=e.find(".bdt-advanced-gmap"),n=e.find(".bdt-advanced-map"),r=o.data("map_settings"),i=o.data("map_markers"),l=e.find("ul.bdt-gmap-lists div.bdt-gmap-list-item"),s=e.find(".bdt-search"),p=e.find(".bdt-search-input"),d=e.find(".bdt-gmap-search-wrapper > form");o.length&&(elementorFrontend.isEditMode()?a(n,r,i,l,s,p,d,o):window.addEventListener("load",(function(){a(n,r,i,l,s,p,d,o)})))};function n(e,t){var o=""!==t?`<div class="bdt-map-tooltip-top-image"><img class="bdt-map-image" src="${t}" alt="" /></div>`:"",n=void 0!==e.website?`<a href="${e.website}">${e.website}</a>`:"",a=void 0!==e.phone?`<a href="tel:${e.phone}">${e.phone}</a>`:"",r="";if(void 0!==e.content){var i=document.createElement("div");i.innerHTML=e.content;for(var l=i.querySelectorAll("script"),s=0;s<l.length;s++)l[s].remove();for(var p=i.querySelectorAll("[onclick], [onload], [onerror], [onmouseover], [onmouseout]"),d=0;d<p.length;d++)p[d].removeAttribute("onclick"),p[d].removeAttribute("onload"),p[d].removeAttribute("onerror"),p[d].removeAttribute("onmouseover"),p[d].removeAttribute("onmouseout");r=`<span class="bdt-tooltip-content">${i.innerHTML}</span><br>`}var m=void 0!==e.place?`<h5 class="bdt-tooltip-place">${e.place}</h5>`:"";return`<div class="bdt-map-tooltip-view">\n                    <div class="bdt-map-tooltip-view-inner">\n                        ${o}\n                        <div class="bdt-map-tooltip-bottom-footer">\n                            ${void 0!==e.title?`<h4 class="bdt-tooltip-title">${e.title}</h4>`:""}\n                            ${m}\n                            ${r}\n                            ${n}\n                            ${a}\n                        </div>\n                    </div>\n                </div>`}var a=function(t,o,a,r,i,l,s,p){t.removeAttr("style");var d={center:{lat:parseFloat(o.lat),lng:parseFloat(o.lng)},zoom:o.zoom||15,mapTypeId:google.maps.MapTypeId[o.mapTypeId?.toUpperCase()]||google.maps.MapTypeId.ROADMAP,zoomControl:void 0===o.zoomControl||o.zoomControl,zoomControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},mapTypeControl:void 0===o.mapTypeControl||o.mapTypeControl,streetViewControl:void 0===o.streetViewControl||o.streetViewControl,scrollwheel:void 0===o.scrollwheel||o.scrollwheel,fullscreenControl:!0},m=p[0],c=new google.maps.Map(m,d),v=[],g=new google.maps.InfoWindow;for(var f in a){var u=void 0!==a[f].image?a[f].image:"",b={position:{lat:parseFloat(a[f].lat),lng:parseFloat(a[f].lng)},map:c,title:a[f].title};a[f].icon&&(b.icon=a[f].icon);var h=new google.maps.Marker(b);!function(e,t,o){var a=n(t,o);google.maps.event.addListener(e,"click",(function(){g.setContent(a),g.open(c,e)}))}(h,a[f],u),v.push(h)}if(p.data("map_style"))try{var w=p.data("map_style");"string"==typeof w&&(w=JSON.parse(w)),c.setOptions({styles:w})}catch(e){console.error("Error parsing map styles:",e)}function y(t,o){e(t).filter((function(){e(this).toggle(e(this).text().toLowerCase().indexOf(o)>-1)}))}p.data("map_geocode")&&e(s).on("submit",(function(t){t.preventDefault();var o=new google.maps.Geocoder,n=e(this).find(".bdt-search-input").val().trim();o.geocode({address:n},(function(e,t){if("OK"===t){var o=e[0].geometry.location;c.setCenter(o),new google.maps.Marker({map:c,position:o})}}))})),e(r).on("click",(function(t){var a=e(this).data("settings");if(a){var r={lat:parseFloat(a.lat),lng:parseFloat(a.lng)};c.setCenter(r),c.setZoom(o.zoom);var i=void 0!==a.image?a.image[0]:"",l=new google.maps.Marker({position:r,map:c,title:a.title});a.icon&&l.setIcon(a.icon);var s=n(a,i);if(g.setContent(s),g.open(c,l),p.data("map_style"))try{var d=p.data("map_style");"string"==typeof d&&(d=JSON.parse(d)),c.setOptions({styles:d})}catch(t){console.error("Error parsing map styles:",t)}}})),e(i).on("submit",(function(t){t.preventDefault();let o=e(l).val().toLowerCase();y(r,o)})),e(l).on("keyup",(function(){let t=e(this).val().toLowerCase();y(r,t)}))};jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/bdt-advanced-gmap.default",o)}))}(jQuery,window.elementorFrontend);