let bkap_fullcalendar={};function bkap_load_calendar(){var calendarEl=document.getElementById("bkap-calendar"),product_ids=jQuery("#product_ids").val(),bkap_vendor_id=null!=booking_calendar_params.bkap_vendor_id?booking_calendar_params.bkap_vendor_id:"",daymaxevents=parseInt(booking_calendar_params.daymaxevents);isNaN(daymaxevents)&&(daymaxevents=!0),bkap_fullcalendar=new FullCalendar.Calendar(calendarEl,{initialView:booking_calendar_params.initialview,slotMinTime:booking_calendar_params.timeslots[0],slotMaxTime:booking_calendar_params.timeslots[1],headerToolbar:JSON.parse(booking_calendar_params.headertoolbar),navLinks:!0,dayMaxEvents:daymaxevents,events:"?bkapc_events=json"+bkap_vendor_id+"&product_ids="+product_ids,locale:booking_calendar_params.lang,loading:function(isLoading,view){1==isLoading?jQuery("#bkap_events_loader").show():0==isLoading&&jQuery("#bkap_events_loader").hide()},eventDidMount:function(info){"grey"===info.backgroundColor?jQuery(info.el).on("click",function(){let title=info.event._def.title,date=info.event._instance.range,start_date=date.start;date.end.setDate(date.end.getDate()-1);let end_date=date.end;jQuery("#availability-start").datepicker("setDate",start_date),jQuery("#availability-end").datepicker("setDate",end_date),jQuery("#vendor-global-holiday .title").val(title),jQuery(".update-type").val("edit"),jQuery(".update-id").val(info.event.id),jQuery(".popup-overlay, .popup-content").addClass("active")}):jQuery(info.el).qtip({content:{text:booking_calendar_params.loading,button:booking_calendar_params.tip_close,ajax:{url:booking_calendar_params.ajaxurl,type:"POST",data:{action:"bkap_booking_calender_content",order_id:info.event.id,event_value:info.event.extendedProps.value}}},show:{event:"click",solo:!0},position:{my:"bottom right",at:"top right"},hide:"unfocus",style:{classes:"qtip-light qtip-shadow"}})}})}document.addEventListener("DOMContentLoaded",function(){bkap_load_calendar(),bkap_fullcalendar.render()}),jQuery(document).ready(function(){jQuery("#bkap_clr_products").length>0&&jQuery("#bkap_clr_products").select2({allowClear:!1,placeholder:"Select products...",width:"25%"}),jQuery("#calendar-filter").submit(function(){var product_ids="",pro_ids=[];jQuery.each(jQuery(this).serializeArray(),function(){"bkap_clr_products[]"==this.name&&pro_ids.push(this.value)}),pro_ids.length>0&&(product_ids=pro_ids.join(",")),jQuery("#product_ids").val(product_ids);var bkap_vendor_id=null!=booking_calendar_params.bkap_vendor_id?booking_calendar_params.bkap_vendor_id:"";return eventSource=bkap_fullcalendar.getEventSources(),eventSource[0].remove(),bkap_fullcalendar.addEventSource("?bkapc_events=json"+bkap_vendor_id+"&product_ids="+product_ids),!1})});
