var calendar=Vue.component("tab-calendar",{template:"#calendar-tab",data:()=>({data:{settings:{},config:{languages:bkap_view_calendar_param.languages,date_formats:bkap_view_calendar_param.bkap_date_formats,time_formats:bkap_view_calendar_param.bkap_time_formats,bkap_days:bkap_view_calendar_param.bkap_days,bkap_calendar_themes:bkap_view_calendar_param.bkap_calendar_themes},label:{saving_loader:bkap_params.vue.label.saving_loader,loading_loader:bkap_params.vue.label.loading_loader,save_settings:bkap_params.vue.label.save_settings,connect_to_google_calendar:bkap_params.vue.label.connect_to_google_calendar,logout_from_google_calendar:bkap_params.vue.label.logout_from_google_calendar}},show_saved_message:!1,show_error_message:!1,show_saving_loader:!1,show_loading_loader:!0,ajax_error:!1,error_message:""}),mounted(){let $this=this;$this.data.settings=bkap_view_calendar_param.data,$this.show_loading_loader=!1,$this.load_datepicker_js_file(),setTimeout(function(){$this.set_calendar_theme()},500)},methods:{save_settings(){this.show_saved_message=!1,this.show_error_message=!1,this.show_saving_loader=!0,this.show_reset_tracking_message=!1,this.show_loading_loader=!1,this.ajax_error=!1,this.error_message="";let self=this;axios.post(`${tyche.bkap.rest_url()}global-settings/save`,{data:self.data.settings},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data&&"success"===response.data.type?(self.show_saving_loader=!1,self.show_saved_message=!0):(self.error_message=tyche.bkap.return_label("axios_get_error"),self.show_saving_loader=!1,self.show_error_message=!0)}).catch(function(error){self.error_message=tyche.bkap.return_label("axios_get_error",error),self.show_saving_loader=!1,self.show_error_message=!0}),document.getElementById("bkap-page").scrollIntoView({behavior:"smooth",block:"start"})},load_datepicker_js_file(){let $this=this;var langFile=bkap_params.bkap_calendar_lang_url.replace("{LANG}",$this.data.settings.booking_language);jQuery.getScript(langFile,function(){setTimeout(function(){$this.data.settings.calendar_language=jQuery.datepicker.regional[$this.data.settings.booking_language]},100)})},set_calendar_theme(){var sheet=document.getElementById("bkap-jquery-ui-style-css");null!==sheet&&(sheet.disabled=!0,sheet.parentNode.removeChild(sheet)),link=document.createElement("link"),link.rel="stylesheet",link.type="text/css",link.id="bkap-jquery-ui-style-css",link.href=bkap_params.bkap_calendar_theme_url.replace("{CALENDAR_THEME}",this.data.settings.booking_themes),document.getElementsByTagName("HEAD")[0].appendChild(link)}}});
