var zoom=Vue.component("tab-zoom",{template:"#zoom-tab",data:()=>({data:{settings:{settings:{assign_meeting_status:!1,is_zoom_meeting_enabled:!1}},label:{saving_loader:bkap_params.vue.label.saving_loader,loading_loader:bkap_params.vue.label.loading_loader,save_settings:bkap_params.vue.label.save_settings,test_connection_success_message:bkap_view_zoom_param.label.test_connection_success_message,test_connection_error_message:bkap_view_zoom_param.label.test_connection_error_message,assign_bookings_success_message:bkap_view_zoom_param.label.assign_bookings_success_message,assign_bookings_error_message:bkap_view_zoom_param.label.assign_bookings_error_message,zoom_connection_success_message:bkap_view_zoom_param.label.zoom_connection_success_message,zoom_connection_failure_message:bkap_view_zoom_param.label.zoom_connection_failure_message,zoom_connection_logout_message:bkap_view_zoom_param.label.zoom_connection_logout_message},l_error_message:bkap_params.vue.el_error_message},show_saved_message:!1,show_error_message:!1,show_saving_loader:!1,show_loading_loader:!0,ajax_error:!1,error_message:"",show_instructions_zoom:!1,is_testing_connection:!1,is_logging_out:!1,is_assigning_meetings_to_bookings:!1,show_test_connection_success_message:!1,show_test_connection_error_message:!1,show_assign_bookings_success_message:!1,show_assign_bookings_error_message:!1,show_logout_message:!1}),mounted(){this.data.settings=bkap_view_zoom_param.data,this.show_loading_loader=!1},methods:{reset(){this.show_saved_message=!1,this.show_error_message=!1,this.show_saving_loader=!1,this.show_loading_loader=!1,this.ajax_error=!1,this.error_message="",this.show_instructions_zoom=!1,this.is_testing_connection=!1,this.is_assigning_meetings_to_bookings=!1,this.show_test_connection_success_message=!1,this.show_test_connection_error_message=!1,this.show_assign_bookings_success_message=!1,this.show_assign_bookings_error_message=!1},toggle_display(e){void 0!==this[e]&&(this[e]=!this[e])},save_settings(){this.reset(),this.show_saving_loader=!0;let $this=this;axios.post(`${tyche.bkap.rest_url()}zoom/save`,{data:$this.data.settings},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data&&"success"===response.data.type?($this.show_saving_loader=!1,$this.data.settings=response.data.data,$this.show_saved_message=!0):($this.error_message=tyche.bkap.return_label("axios_get_error"),$this.show_saving_loader=!1,$this.show_error_message=!0)}).catch(function(error){$this.error_message=tyche.bkap.return_label("axios_get_error",error),$this.show_saving_loader=!1,$this.show_error_message=!0}),document.getElementById("bkap-page").scrollIntoView({behavior:"smooth",block:"start"})},test_connection(){this.reset(),this.is_testing_connection=!0;let $this=this;axios.post(`${tyche.bkap.rest_url()}zoom/test-connection`,{data:$this.data.settings},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data.type?"success"===response.data.type?($this.is_testing_connection=!1,$this.show_test_connection_success_message=!0,$this.data.settings=response.data.data):($this.is_testing_connection=!1,$this.show_test_connection_error_message=!0,$this.data.label.test_connection_error_message=response.data.error_description):($this.show_test_connection_error_message=!0,$this.is_testing_connection=!1)}).catch(function(error){$this.show_test_connection_error_message=!0,$this.is_testing_connection=!1})},assign_meetings_to_bookings(){this.reset(),this.is_assigning_meetings_to_bookings=!0;let $this=this;axios.post(`${tyche.bkap.rest_url()}zoom/assign-meeting-to-bookings`,{},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data&&"success"===response.data?($this.is_assigning_meetings_to_bookings=!1,$this.show_assign_bookings_success_message=!0,$this.data.settings.settings.assign_meeting_status="done"):($this.is_assigning_meetings_to_bookings=!1,$this.show_assign_bookings_error_message=!0)}).catch(function(error){$this.is_assigning_meetings_to_bookings=!1,$this.show_assign_bookings_error_message=!0})},logout(){this.reset();let $this=this;$this.is_logging_out=!0,axios.post(`${tyche.bkap.rest_url()}zoom/logout`,{data:$this.data.settings},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data.type&&"success"===response.data.type&&($this.data.settings=response.data.data,$this.show_logout_message=!0)}).catch(function(error){}),document.getElementById("bkap-page").scrollIntoView({behavior:"smooth",block:"start"})}}});
