var twilio=Vue.component("tab-twilio",{template:"#twilio-tab",data:()=>({data:{settings:{},test:{phone_number:"",message:""},label:{saving_loader:bkap_params.vue.label.saving_loader,loading_loader:bkap_params.vue.label.loading_loader,sending_sms_loader:bkap_view_twilio_param.label.sending_sms_loader,save_settings:bkap_params.vue.label.save_settings,send_test_sms:bkap_view_twilio_param.label.send_test_sms}},show_saved_message:!1,show_send_sms_success_message:!1,send_sms_success_message:"",show_error_message:!1,show_saving_loader:!1,show_sending_sms_loader:!1,show_loading_loader:!0,show_sending_sms_error_message:!1,ajax_error:!1,error_message:"",sending_sms_error_message:""}),mounted(){this.data.settings=bkap_view_twilio_param.data,this.show_loading_loader=!1},methods:{save_settings(){this.show_saved_message=!1,this.show_send_sms_success_message=!1,this.show_error_message=!1,this.show_saving_loader=!0,this.show_sending_sms_loader=!1,this.show_sending_sms_error_message=!1,this.show_loading_loader=!1,this.ajax_error=!1,this.error_message="",this.send_sms_success_message="";let self=this;axios.post(`${tyche.bkap.rest_url()}twilio/save`,{data:self.data.settings},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data&&"success"===response.data?(self.show_saving_loader=!1,self.show_saved_message=!0):(self.error_message=tyche.bkap.return_label("axios_get_error"),self.show_saving_loader=!1,self.show_error_message=!0)}).catch(function(error){self.error_message=tyche.bkap.return_label("axios_get_error",error),self.show_saving_loader=!1,self.show_error_message=!0}),document.getElementById("bkap-page").scrollIntoView({behavior:"smooth",block:"start"})},send_test_sms(){this.show_saved_message=!1,this.show_send_sms_success_message=!1,this.show_error_message=!1,this.show_saving_loader=!1,this.show_sending_sms_loader=!0,this.show_sending_sms_error_message=!1,this.show_loading_loader=!1,this.ajax_error=!1,this.error_message="",this.send_sms_success_message="";let self=this;axios.post(`${tyche.bkap.rest_url()}twilio/send-test-sms`,{phone_number:self.data.test.phone_number,message:self.data.test.message},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data.type?"success"===response.data.type?(self.data.test.phone_number="",self.data.test.message="",self.show_sending_sms_loader=!1,self.show_send_sms_success_message=!0,self.send_sms_success_message=response.data.text):"error"===response.data.type&&(self.sending_sms_error_message=response.data.error_description,self.show_sending_sms_loader=!1,self.show_sending_sms_error_message=!0):(self.sending_sms_error_message=tyche.bkap.return_label("axios_get_error"),self.show_sending_sms_loader=!1,self.show_sending_sms_error_message=!0)}).catch(function(error){self.sending_sms_error_message=tyche.bkap.return_label("axios_get_error",error),self.show_sending_sms_loader=!1,self.show_sending_sms_error_message=!0}),document.getElementById("div_send_test_sms").scrollIntoView({behavior:"smooth",block:"start"})}}});
