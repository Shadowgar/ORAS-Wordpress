var global_settings=Vue.component("tab-global-settings",{template:"#global-settings-tab",data:()=>({data:{settings:{},config:{timeslot_display_modes:bkap_view_global_settings_param.timeslot_display_modes,datepicker_options:bkap_view_global_settings_param.datepicker_options},label:{saving_loader:bkap_params.vue.label.saving_loader,loading_loader:bkap_params.vue.label.loading_loader,save_settings:bkap_params.vue.label.save_settings},fn:tyche.bkap.metabox.booking},show_saved_message:!1,show_error_message:!1,show_saving_loader:!1,show_loading_loader:!0,show_reset_tracking_message:!1,ajax_error:!1,error_message:""}),mounted(){this.data.settings=bkap_view_global_settings_param.data,this.data.fn.initialize_datepicker("#global_settings_select_holidays",this.data.config.datepicker_options),this.show_loading_loader=!1,setTimeout(function(){let width=jQuery("#global_settings_select_holidays").width()+"px";jQuery("#booking_global_holidays").css("width",width),jQuery("#booking_global_holidays").css("max-width",width)},500)},methods:{save_settings(){this.show_saved_message=!1,this.show_error_message=!1,this.show_saving_loader=!0,this.show_reset_tracking_message=!1,this.show_loading_loader=!1,this.ajax_error=!1,this.error_message="";let self=this,data=self.data.settings;data.booking_global_holidays=jQuery("#booking_global_holidays").val(),axios.post(`${tyche.bkap.rest_url()}global-settings/save`,{data:data},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data&&"success"===response.data.type?(self.show_saving_loader=!1,self.show_saved_message=!0,self.data.settings=response.data.data):(self.error_message=tyche.bkap.return_label("axios_get_error"),self.show_saving_loader=!1,self.show_error_message=!0)}).catch(function(error){self.error_message=tyche.bkap.return_label("axios_get_error",error),self.show_saving_loader=!1,self.show_error_message=!0}),document.getElementById("bkap-page").scrollIntoView({behavior:"smooth",block:"start"})},reset_tracking_data(){this.show_saved_message=!1,this.show_error_message=!1,this.show_reset_tracking_message=!1,this.show_saving_loader=!1,this.show_loading_loader=!0,this.ajax_error=!1,this.error_message="";let self=this;axios.post(`${tyche.bkap.rest_url()}global-settings/reset-tracking-data`,{},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data&&"success"===response.data?(self.show_loading_loader=!1,self.show_reset_tracking_message=!0,setTimeout(function(){window.location.reload()},1e3)):(self.error_message=tyche.bkap.return_label("axios_get_error"),self.show_loading_loader=!1,self.show_error_message=!0)}).catch(function(error){self.error_message=tyche.bkap.return_label("axios_get_error",error),self.show_loading_loader=!1,self.show_error_message=!0}),document.getElementById("bkap-page").scrollIntoView({behavior:"smooth",block:"start"})}}});
