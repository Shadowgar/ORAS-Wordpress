var resources=Vue.component("tab-resources",{template:"#resources-tab",data:()=>({data:{label:{loading_loader:bkap_params.vue.label.loading_loader,saving_resource_loader:bkap_view_resources_param.label.saving_resource_loader,updating_resource_loader:bkap_view_resources_param.label.updating_resource_loader,add_resource:bkap_view_resources_param.label.add_resource,edit_resource:bkap_view_resources_param.label.edit_resource,save_resource:bkap_view_resources_param.label.save_resource,update_resource:bkap_view_resources_param.label.update_resource},settings:{},add_edit_resource:{data:{availability:[]}},toggle_edit_mode:{manage_availability:!1},fn:tyche.bkap.metabox.booking},is_edit_mode:!1,show_loading_loader:!1,show_add_edit_resource_page:!1,show_updating_resource_loader:!1,show_saving_resource_loader:!1,show_updating_resource_loader:!1}),mounted(){this.data.settings=bkap_view_resources_param.data,this.show_loading_loader=!1,tyche.bkap.resources.table.init(this)},methods:{close(){jQuery("#resources-search").trigger("click"),this.show_add_edit_resource_page=!1},save_update_resource(){const $this=this,loader=$this.is_edit_mode?"show_updating_resource_loader":"show_saving_resource_loader";$this[loader]=!0;let data=$this.data.add_edit_resource.data;axios.post(`${tyche.bkap.rest_url()}resources/save-update`,{data:data},{headers:{"X-WP-Nonce":bkap_params.nonce}}).then(function(response){void 0!==response.data&&"success"===response.data.type?(tyche.bkap.notification(response.data.message,"success"),$this.is_edit_mode=!1,$this.show_add_edit_resource_page=!1,$this.data.add_edit_resource.data={data:{availability:[]}},jQuery("#resources-search").trigger("click"),$this[loader]=!1):(tyche.bkap.notification(tyche.bkap.return_label("axios_get_error"),"alert"),$this[loader]=!1)}).catch(function(error){tyche.bkap.notification(tyche.bkap.return_label("axios_get_error",error),"alert"),$this[loader]=!1})},add_row(){this.data.add_edit_resource.data.availability.push({edit:!0,is_editable:!1,range_type:"custom",range_days_from:"1",range_days_to:"2",range_months_from:"1",range_months_to:"2",range_weeks_from:"1",range_weeks_to:"2",range_date_from:"",range_date_to:"",range_date_from_formatted:"",range_date_to_formatted:"",range_time_from:"",range_time_to:"",range_time_range_date_from:"",range_time_range_date_to:"",range_time_range_date_from_formatted:"",range_time_range_date_to_formatted:"",range_time_range_time_from:"",range_time_range_time_to:"",priority:10,bookable:""})},update_row(row){""!==row.range_date_from&&(row.range_date_from_formatted=new Date(row.range_date_from).toJSON().slice(0,10).split("-").reverse().join("/")),""!==row.range_date_to&&(row.range_date_to_formatted=new Date(row.range_date_to).toJSON().slice(0,10).split("-").reverse().join("/")),""!==row.range_time_range_date_from&&(row.range_time_range_date_from_formatted=new Date(row.range_time_range_date_from).toJSON().slice(0,10).split("-").reverse().join("/")),""!==row.range_time_range_date_to&&(row.range_time_range_date_to_formatted=new Date(row.range_time_range_date_to).toJSON().slice(0,10).split("-").reverse().join("/")),row.edit=!1,this.data.toggle_edit_mode.manage_availability=!1},edit_row:function(row){row.edit=!0},delete_row:function(index){this.data.add_edit_resource.data.availability.splice(index,1)}}});
